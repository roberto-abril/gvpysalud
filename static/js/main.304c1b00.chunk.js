(this.webpackJsonpMapViewer=this.webpackJsonpMapViewer||[]).push([[0],{31:function(e,t,a){e.exports=a(65)},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){},62:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(29),r=a.n(i),c=(a(36),a(37),a(38),a(39),a(5)),s=a.n(c),l=a(12),u=a(9),m=a(10),d=a(4),p=a(13),h=a(14),f=(a(41),a(17)),v=a.n(f),g=function(){function e(){Object(u.a)(this,e)}return Object(m.a)(e,null,[{key:"ObjectToQueryString",value:function(e){return Object.keys(e).map((function(t){return e[t]?t+"="+e[t]:null})).filter(Boolean).join("&")}},{key:"PageLoad",value:function(e){window.location.href=e}},{key:"PageReload",value:function(e){if(e){var t=window.location.href.split("#");window.location.href=t[0]+e,window.location.reload(!1)}else window.location.reload(!1)}},{key:"Distance",value:function(e,t,a,n){if(e==a&&t==n)return 0;var o=Math.PI*e/180,i=Math.PI*a/180,r=t-n,c=Math.PI*r/180,s=Math.sin(o)*Math.sin(i)+Math.cos(o)*Math.cos(i)*Math.cos(c);return s>1&&(s=1),s=60*(s=180*(s=Math.acos(s))/Math.PI)*1.1515,s*=1.609344}}]),e}(),b=a(59),k=function(){function e(){Object(u.a)(this,e)}return Object(m.a)(e,null,[{key:"header",value:function(){return{}}},{key:"Post",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,delete t.url,e.next=4,v()({method:"post",url:a,data:b.stringify(t),headers:this.header()}).catch((function(e){console.log(e)}));case 4:if(void 0===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.data);case 9:return e.abrupt("return",{wasOk:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"PostForm",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData(t.form.current),e.next=3,v()({method:"post",url:t.url,data:a,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){console.log(e)}));case 3:if(void 0===(n=e.sent)){e.next=8;break}return e.abrupt("return",n.data);case 8:return e.abrupt("return",{wasOk:!1});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"Get",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,delete t.url,a=a+"?"+g.ObjectToQueryString(t),e.next=5,v()({method:"get",url:a,headers:this.header()}).catch((function(e){console.log(e)}));case 5:if(void 0===(n=e.sent)){e.next=10;break}return e.abrupt("return",n.data);case 10:return e.abrupt("return",{wasOk:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),y=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={items:[]},n.onActionClick=n.onActionClick.bind(Object(d.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.pageLoading(!0),0!==this.state.items.length){e.next=7;break}return t={url:"/gvpysalud/data/home.json"},e.next=5,k.Get(t);case 5:a=e.sent,this.setState({items:a});case 7:this.props.pageLoading(!1);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onActionClick",value:function(e){e.preventDefault(),this.props.onActionChange(e.currentTarget.dataset.code)}},{key:"renderType",value:function(e,t){switch(e.type){case"h1":return o.a.createElement("h1",{className:"text-center"},e.text);case"h2":return o.a.createElement("h2",{className:"text-center"},e.text);case"p":return o.a.createElement("p",null,e.text);case"btn":return o.a.createElement("p",null,o.a.createElement("button",{className:"btn btn-primary",onClick:this.onActionClick,"data-code":e.action},e.text));default:return null}}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{className:"row mt-3"},this.state.items.map((function(t,a){return o.a.createElement("div",{className:"col-12",key:a},e.renderType(t,a))}))),o.a.createElement("div",null,o.a.createElement("br",null)))}}]),a}(o.a.Component),C=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={},n.onMapClick=n.onMapClick.bind(Object(d.a)(n)),n}return Object(m.a)(a,[{key:"onMapClick",value:function(e){e.preventDefault(),this.props.onActionChange("locations-map")}},{key:"render",value:function(){return o.a.createElement("div",{className:"container locations"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12"},o.a.createElement("ul",{className:"list-group mt-3"},this.props.locations.map((function(e,t){return o.a.createElement("li",{className:"list-group-item location",key:t},o.a.createElement("h3",null,e.name),o.a.createElement("span",{className:"badge badge-info"},e.category),o.a.createElement("span",{className:"badge badge-primary pull-right"},e.distance.toFixed(2),"km"))}))))),o.a.createElement("div",{className:"buttons-left mr-3 ml-3"},o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.onMapClick},"Mapa")))}}]),a}(o.a.Component),E=a(68),w=a(69),j=a(67),O=(a(62),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).mapRef=void 0,n.map=void 0,n.state={locationIndex:-1},n.mapRef=o.a.createRef(),n.onDetailsCloseClick=n.onDetailsCloseClick.bind(Object(d.a)(n)),n.onListClick=n.onListClick.bind(Object(d.a)(n)),n.mapCenterClick=n.mapCenterClick.bind(Object(d.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.map=this.mapRef.current.leafletElement}},{key:"onDetailsCloseClick",value:function(e){e.preventDefault(),this.setState({locationIndex:-1})}},{key:"onListClick",value:function(e){e.preventDefault(),this.props.onActionChange("locations-list")}},{key:"mapCenterClick",value:function(e){this.map.panTo([this.props.latitude,this.props.longitude])}},{key:"render",value:function(){var e=this,t=this.state.locationIndex>-1?this.props.locations[this.state.locationIndex]:{};return o.a.createElement("div",{className:"container locations"},this.state.locationIndex>-1&&o.a.createElement("div",{className:"location-details"},o.a.createElement("i",{className:"fa fa-close float-right p-2",onClick:this.onDetailsCloseClick}),o.a.createElement("h3",null,t.name),o.a.createElement("span",{className:"badge badge-info"},t.category),o.a.createElement("span",{className:"badge badge-primary pull-right"},t.distance.toFixed(2),"km")),o.a.createElement(E.a,{center:[this.props.latitude,this.props.longitude],zoom:12,maxZoom:17,minZoom:8,ref:this.mapRef},o.a.createElement(w.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),this.props.locations.map((function(t,a){return o.a.createElement(j.a,{key:a,position:[t.latitude,t.longitude],onClick:function(){e.setState({locationIndex:a})}})}))),o.a.createElement("div",{className:"buttons-left mr-3 ml-3"},o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.onListClick},"Lista")),o.a.createElement("div",{className:"buttons-right mr-3 ml-3"},o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.mapCenterClick},o.a.createElement("i",{className:"fa fa-crosshairs"}))))}}]),a}(o.a.Component)),x=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={isLoading:!0,menuShow:!1,viewCode:"home",locations:[],latitude:-24.6728445,longitude:-56.706004},n.pageLoading=n.pageLoading.bind(Object(d.a)(n)),n.onHomeClick=n.onHomeClick.bind(Object(d.a)(n)),n.onActionChange=n.onActionChange.bind(Object(d.a)(n)),n.locationSort=n.locationSort.bind(Object(d.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pageLoading(!0),t=-24.6728445,a=-56.706004,n=this,e.next=6,navigator.geolocation.getCurrentPosition((function(e){t=e.coords.latitude,a=e.coords.longitude,n.setState({latitude:e.coords.latitude,longitude:e.coords.longitude}),n.locationSort(t,a)}),(function(e){n.locationSort(t,a)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"locationSort",value:function(){var e=Object(l.a)(s.a.mark((function e(t,a){var n,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:"/gvpysalud/data/locations.json"},e.next=3,k.Get(n);case 3:for(o=e.sent,i=0;i<o.length;i++)o[i].distance=g.Distance(t,a,o[i].latitude,o[i].longitude);o.sort((function(e,t){return e.distance>t.distance?1:t.distance>e.distance?-1:0})),this.setState({locations:o,isLoading:!1}),this.pageLoading(!1);case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"pageLoading",value:function(e){this.setState({isLoading:e})}},{key:"onHomeClick",value:function(e){e.preventDefault(),this.setState({viewCode:"home"})}},{key:"onActionChange",value:function(e){this.setState({viewCode:e})}},{key:"renderMain",value:function(){switch(this.state.viewCode){case"home":return o.a.createElement(y,{pageLoading:this.pageLoading,onActionChange:this.onActionChange});case"locations-list":return o.a.createElement(C,{locations:this.state.locations,onActionChange:this.onActionChange});case"locations-map":return o.a.createElement(O,{locations:this.state.locations,onActionChange:this.onActionChange,latitude:this.state.latitude,longitude:this.state.longitude});default:return null}}},{key:"render",value:function(){return o.a.createElement("div",{className:"container"},this.state.isLoading&&o.a.createElement("div",{className:"is-loading"},o.a.createElement("div",{className:"spinner"},o.a.createElement("div",{className:"double-bounce1"}),o.a.createElement("div",{className:"double-bounce2"}))),o.a.createElement("header",{className:"blog-header py-3"},o.a.createElement("div",{className:"row flex-nowrap justify-content-between align-items-center"},o.a.createElement("div",{className:"col-4 pt-1 pointer",onClick:this.onHomeClick},"home"!==this.state.viewCode&&o.a.createElement("i",{className:"fa fa-home"})),o.a.createElement("div",{className:"col-4 text-center pointer",onClick:this.onHomeClick},"Map Viewer"),o.a.createElement("div",{className:"col-4 d-flex justify-content-end align-items-center"}))),o.a.createElement("main",{role:"main",className:"container"},this.renderMain(),o.a.createElement("br",null)),o.a.createElement("footer",null,"Desarrollado por ",o.a.createElement("a",{href:"https://geovoluntarios.org",target:"_blank"}," ",o.a.createElement("img",{src:"/gvpysalud/images/logo192.png"}))))}}]),a}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.304c1b00.chunk.js.map