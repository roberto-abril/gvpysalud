(this.webpackJsonpMapViewer=this.webpackJsonpMapViewer||[]).push([[0],{31:function(e,t,n){e.exports=n(65)},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){},62:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(29),r=n.n(i),c=(n(36),n(37),n(38),n(39),n(5)),s=n.n(c),l=n(12),u=n(9),p=n(10),d=n(1),m=n(13),h=n(14),f=(n(41),n(17)),g=n.n(f),v=function(){function e(){Object(u.a)(this,e)}return Object(p.a)(e,null,[{key:"ObjectToQueryString",value:function(e){return Object.keys(e).map((function(t){return e[t]?t+"="+e[t]:null})).filter(Boolean).join("&")}},{key:"PageLoad",value:function(e){window.location.href=e}},{key:"PageReload",value:function(e){if(e){var t=window.location.href.split("#");window.location.href=t[0]+e,window.location.reload(!1)}else window.location.reload(!1)}},{key:"PageOpen",value:function(e){window.open(e,"_blank")}},{key:"Distance",value:function(e,t,n,a){if(e==n&&t==a)return 0;var o=Math.PI*e/180,i=Math.PI*n/180,r=t-a,c=Math.PI*r/180,s=Math.sin(o)*Math.sin(i)+Math.cos(o)*Math.cos(i)*Math.cos(c);return s>1&&(s=1),s=60*(s=180*(s=Math.acos(s))/Math.PI)*1.1515,s*=1.609344}}]),e}(),b=n(59),k=function(){function e(){Object(u.a)(this,e)}return Object(p.a)(e,null,[{key:"header",value:function(){return{}}},{key:"Post",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,delete t.url,e.next=4,g()({method:"post",url:n,data:b.stringify(t),headers:this.header()}).catch((function(e){console.log(e)}));case 4:if(void 0===(a=e.sent)){e.next=9;break}return e.abrupt("return",a.data);case 9:return e.abrupt("return",{wasOk:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"PostForm",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData(t.form.current),e.next=3,g()({method:"post",url:t.url,data:n,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){console.log(e)}));case 3:if(void 0===(a=e.sent)){e.next=8;break}return e.abrupt("return",a.data);case 8:return e.abrupt("return",{wasOk:!1});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"Get",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,delete t.url,n=n+"?"+v.ObjectToQueryString(t),e.next=5,g()({method:"get",url:n,headers:this.header()}).catch((function(e){console.log(e)}));case 5:if(void 0===(a=e.sent)){e.next=10;break}return e.abrupt("return",a.data);case 10:return e.abrupt("return",{wasOk:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),C=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={items:[]},a.onActionClick=a.onActionClick.bind(Object(d.a)(a)),a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.pageLoading(!0),0!==this.state.items.length){e.next=7;break}return t={url:"/gvpysalud/data/home.json"},e.next=5,k.Get(t);case 5:n=e.sent,this.setState({items:n});case 7:this.props.pageLoading(!1);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onActionClick",value:function(e){e.preventDefault(),this.props.onActionChange(e.currentTarget.dataset.code,-1)}},{key:"renderType",value:function(e,t){switch(e.type){case"h1":return o.a.createElement("h1",{className:"text-center"},e.text);case"h2":return o.a.createElement("h2",{className:"text-center"},e.text);case"p":return o.a.createElement("p",null,e.text);case"btn":return o.a.createElement("p",null,o.a.createElement("button",{className:"btn btn-primary",onClick:this.onActionClick,"data-code":e.action},e.text));default:return null}}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{className:"row mt-3"},this.state.items.map((function(t,n){return o.a.createElement("div",{className:"col-12",key:n},e.renderType(t,n))}))),o.a.createElement("div",null,o.a.createElement("br",null)))}}]),n}(o.a.Component),y=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={},a.onMapClick=a.onMapClick.bind(Object(d.a)(a)),a.onMapOpenClick=a.onMapOpenClick.bind(Object(d.a)(a)),a.onGoogleMapClick=a.onGoogleMapClick.bind(Object(d.a)(a)),a}return Object(p.a)(n,[{key:"onMapClick",value:function(e){e.preventDefault(),this.props.onActionChange("locations-map",-1)}},{key:"onMapOpenClick",value:function(e){e.preventDefault();var t=parseInt(e.currentTarget.dataset.index);this.props.onActionChange("locations-map",t)}},{key:"onGoogleMapClick",value:function(e){e.preventDefault();var t=parseInt(e.currentTarget.dataset.index);v.PageOpen("https://www.google.com/maps/@"+this.props.locations[t].latitude+","+this.props.locations[t].longitude+",17z")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"container locations"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12"},o.a.createElement("ul",{className:"list-group mt-3"},this.props.locations.map((function(t,n){return o.a.createElement("li",{className:"list-group-item location",key:n},o.a.createElement("button",{className:"btn btn-info float-right ml-2","data-index":n,onClick:e.onMapOpenClick},"Ver en Mapa"),o.a.createElement("button",{className:"btn btn-outline-info float-right","data-index":n,onClick:e.onGoogleMapClick},"Google"),o.a.createElement("h3",null,t.name),o.a.createElement("span",{className:"badge badge-info"},t.category),o.a.createElement("span",{className:"badge badge-primary pull-right"},t.distance.toFixed(2),"km"))}))))),o.a.createElement("div",{className:"buttons-left mr-3 ml-3"},o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.onMapClick},"Mapa")))}}]),n}(o.a.Component),E=n(68),w=n(69),O=n(67),x=(n(62),function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).mapRef=void 0,a.map=void 0,a.state={locationIndex:-1},a.mapRef=o.a.createRef(),a.onDetailsCloseClick=a.onDetailsCloseClick.bind(Object(d.a)(a)),a.onListClick=a.onListClick.bind(Object(d.a)(a)),a.mapCenterClick=a.mapCenterClick.bind(Object(d.a)(a)),a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.map=this.mapRef.current.leafletElement}},{key:"onDetailsCloseClick",value:function(e){e.preventDefault(),this.setState({locationIndex:-1})}},{key:"onListClick",value:function(e){e.preventDefault(),this.props.onActionChange("locations-list",-1)}},{key:"mapCenterClick",value:function(e){this.map.panTo([this.props.latitude,this.props.longitude])}},{key:"render",value:function(){var e=this,t=this.state.locationIndex>-1?this.props.locations[this.state.locationIndex]:{},n=-1==this.props.locationSelectedIndex?this.props.latitude:this.props.locations[this.props.locationSelectedIndex].latitude,a=-1==this.props.locationSelectedIndex?this.props.longitude:this.props.locations[this.props.locationSelectedIndex].longitude;return o.a.createElement("div",{className:"container locations"},this.state.locationIndex>-1&&o.a.createElement("div",{className:"location-details"},o.a.createElement("i",{className:"fa fa-close float-right p-2",onClick:this.onDetailsCloseClick}),o.a.createElement("h3",null,t.name),o.a.createElement("span",{className:"badge badge-info"},t.category),o.a.createElement("span",{className:"badge badge-primary pull-right"},t.distance.toFixed(2),"km")),o.a.createElement(E.a,{center:[n,a],zoom:12,maxZoom:17,minZoom:8,ref:this.mapRef},o.a.createElement(w.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),this.props.locations.map((function(t,n){return o.a.createElement(O.a,{key:n,position:[t.latitude,t.longitude],onClick:function(){e.setState({locationIndex:n})}})}))),o.a.createElement("div",{className:"buttons-left mr-3 ml-3"},o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.onListClick},"Lista")),o.a.createElement("div",{className:"buttons-right mr-3 ml-3"},o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.mapCenterClick},o.a.createElement("i",{className:"fa fa-crosshairs"}))))}}]),n}(o.a.Component)),j=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={isLoading:!0,menuShow:!1,viewCode:"home",locationSelectedIndex:-1,locations:[],latitude:-24.6728445,longitude:-56.706004},a.pageLoading=a.pageLoading.bind(Object(d.a)(a)),a.onHomeClick=a.onHomeClick.bind(Object(d.a)(a)),a.onActionChange=a.onActionChange.bind(Object(d.a)(a)),a.locationSort=a.locationSort.bind(Object(d.a)(a)),a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pageLoading(!0),t=-24.6728445,n=-56.706004,a=this,e.next=6,navigator.geolocation.getCurrentPosition((function(e){t=e.coords.latitude,n=e.coords.longitude,a.setState({latitude:e.coords.latitude,longitude:e.coords.longitude}),a.locationSort(t,n)}),(function(e){a.locationSort(t,n)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"locationSort",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={url:"/gvpysalud/data/locations.json"},e.next=3,k.Get(a);case 3:for(o=e.sent,i=0;i<o.length;i++)o[i].distance=v.Distance(t,n,o[i].latitude,o[i].longitude);o.sort((function(e,t){return e.distance>t.distance?1:t.distance>e.distance?-1:0})),this.setState({locations:o,isLoading:!1}),this.pageLoading(!1);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"pageLoading",value:function(e){this.setState({isLoading:e})}},{key:"onHomeClick",value:function(e){e.preventDefault(),this.setState({viewCode:"home"})}},{key:"onActionChange",value:function(e,t){this.setState({viewCode:e,locationSelectedIndex:t})}},{key:"renderMain",value:function(){switch(this.state.viewCode){case"home":return o.a.createElement(C,{pageLoading:this.pageLoading,onActionChange:this.onActionChange});case"locations-list":return o.a.createElement(y,{locations:this.state.locations,onActionChange:this.onActionChange});case"locations-map":return o.a.createElement(x,{locations:this.state.locations,onActionChange:this.onActionChange,locationSelectedIndex:this.state.locationSelectedIndex,latitude:this.state.latitude,longitude:this.state.longitude});default:return null}}},{key:"render",value:function(){return o.a.createElement("div",{className:"container"},this.state.isLoading&&o.a.createElement("div",{className:"is-loading"},o.a.createElement("div",{className:"spinner"},o.a.createElement("div",{className:"double-bounce1"}),o.a.createElement("div",{className:"double-bounce2"}))),o.a.createElement("header",{className:"blog-header py-3"},o.a.createElement("div",{className:"row flex-nowrap justify-content-between align-items-center"},o.a.createElement("div",{className:"col-4 pt-1 pointer",onClick:this.onHomeClick},"home"!==this.state.viewCode&&o.a.createElement("i",{className:"fa fa-home"})),o.a.createElement("div",{className:"col-4 text-center pointer",onClick:this.onHomeClick},"Map Viewer"),o.a.createElement("div",{className:"col-4 d-flex justify-content-end align-items-center"}))),o.a.createElement("main",{role:"main",className:"container"},this.renderMain(),o.a.createElement("br",null)),o.a.createElement("footer",null,"Desarrollado por ",o.a.createElement("a",{href:"https://geovoluntarios.org",target:"_blank"}," ",o.a.createElement("img",{src:"/gvpysalud/images/logo192.png"}))))}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.a0d6c037.chunk.js.map